[tox]
setupdir = {toxinidir}/../..
envlist =
    py27-Django{0103,0104}-{with,without}-extensions,
    {py27}-Django{0105,0106,0107}-{with,without}-extensions,
    {py27,py35,py36,py37}-Django{0108,0109}-{with,without}-extensions,
    {py27,py35,py36,py37}-Django{0110,0111}-{old,new}-middleware-{with,without}-extensions,
    {py35,py36,py37}-Django0200-new-middleware-{with,without}-extensions,
    {py36,py37,py38,py39}-Djangomaster-new-middleware-{with,without}-extensions,
    pypy-Django{0103,0104,0105,0106,0107,0108,0109}-without-extensions,
    pypy-Django{0110,0111}-{old,new}-middleware-without-extensions,

[jenkins]
mostrecent = Django0200

[pytest]
usefixtures = session_initialization requires_data_collector

[testenv]
deps =
    Django0103: Django<1.4
    Django0104: Django<1.5
    Django0105: Django<1.6
    Django0106: Django<1.7
    Django0107: Django<1.8
    Django0108: Django<1.9
    Django0109: Django<1.10
    Django0110: Django<1.11
    Django0111: Django<1.12
    Django0200: Django<2.1
    Djangomaster: https://github.com/django/django/archive/master.zip
setenv =
    PYTHONPATH={toxinidir}/..
    TOX_ENVDIR = {envdir}
    without-extensions: NEW_RELIC_EXTENSIONS = false
    with-extensions: NEW_RELIC_EXTENSIONS = true
    old-middleware: DJANGO_SETTINGS_MODULE=settings_0110_old
    new-middleware: DJANGO_SETTINGS_MODULE=settings_0110_new

commands = py.test -v []

install_command=
    pip install -r {toxinidir}/../base_requirements.txt {opts} {packages}
